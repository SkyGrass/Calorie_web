(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7654"],{MXsR:function(e,t,r){},NyQU:function(e,t,r){"use strict";var o=r("MXsR");r.n(o).a},Q4Eu:function(e,t,r){"use strict";var o=r("Q2AE"),n={inserted:function(e,t,r){var n=t.value,i=o.a.getters&&o.a.getters.roles;if(!(n&&n instanceof Array&&n.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var a=n;i.some(function(e){return a.includes(e)})||e.parentNode&&e.parentNode.removeChild(e)}},i=function(e){e.directive("permission",n)};window.Vue&&(window.permission=n,Vue.use(i)),n.install=i;t.a=n},XINx:function(e,t,r){"use strict";var o={bind:function(e,t,r){var o=e.querySelector(".el-dialog__header"),n=e.querySelector(".el-dialog");o.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var i=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};o.onmousedown=function(e){var t=e.clientX-o.offsetLeft,a=e.clientY-o.offsetTop,l=n.offsetWidth,s=n.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=n.offsetLeft,m=c-n.offsetLeft-l,f=n.offsetTop,p=u-n.offsetTop-s,v=i(n,"left"),h=i(n,"top");v.includes("%")?(v=+document.body.clientWidth*(+v.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(v=+v.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(e){var o=e.clientX-t,i=e.clientY-a;-o>d?o=-d:o>m&&(o=m),-i>f?i=-f:i>p&&(i=p),n.style.cssText+=";left:"+(o+v)+"px;top:"+(i+h)+"px;",r.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},n=function(e){e.directive("el-drag-dialog",o)};window.Vue&&(window["el-drag-dialog"]=o,Vue.use(n)),o.install=n;t.a=o},Y5bG:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),Math.easeInOutQuad=function(e,t,r,o){return(e/=o/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t};var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function n(e,t,r){var n=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,i=e-n,a=0;t=void 0===t?500:t;!function e(){a+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(a,n,i,t)),a<t?o(e):r&&"function"==typeof r&&r()}()}},YAJh:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var o=r("t3Un");function n(e){return Object(o.a)({url:"/u8st/getallu8stlist",method:"post",data:e})}},ZySA:function(e,t,r){"use strict";var o=r("P2sY"),n=r.n(o),i=(r("jUE0"),{bind:function(e,t){e.addEventListener("click",function(r){var o=n()({},t.value),i=n()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},o),a=i.ele;if(a){a.style.position="relative",a.style.overflow="hidden";var l=a.getBoundingClientRect(),s=a.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":((s=document.createElement("span")).className="waves-ripple",s.style.height=s.style.width=Math.max(l.width,l.height)+"px",a.appendChild(s)),i.type){case"center":s.style.top=l.height/2-s.offsetHeight/2+"px",s.style.left=l.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(r.pageY-l.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(r.pageX-l.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=i.color,s.className="waves-ripple z-active",!1}},!1)}}),a=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(a)),i.install=a;t.a=i},gs35:function(e,t,r){"use strict";var o=r("p6YX");r.n(o).a},hE4x:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"c",function(){return l});var o=r("t3Un");function n(e){return Object(o.a)({url:"/u8cus/getallu8cuslist",method:"post",data:e})}function i(e){return Object(o.a)({url:"/u8cus/getallu8cuslistforcanbind",method:"post",data:e})}function a(e){return Object(o.a)({url:"/u8cus/getallu8cuslistwithcode",method:"post",data:e})}function l(e){return Object(o.a)({url:"/u8cus/getallu8cuslisthavebind",method:"post",data:e})}},hmxl:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var o=r("t3Un");function n(e){return Object(o.a)({url:"/inv/getinvlist",method:"post",data:e})}},jUE0:function(e,t,r){},mYkC:function(e,t,r){"use strict";r.d(t,"e",function(){return n}),r.d(t,"j",function(){return i}),r.d(t,"i",function(){return a}),r.d(t,"g",function(){return l}),r.d(t,"h",function(){return s}),r.d(t,"f",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"k",function(){return d}),r.d(t,"c",function(){return m}),r.d(t,"d",function(){return f}),r.d(t,"a",function(){return p});var o=r("t3Un");function n(e){return Object(o.a)({url:"/presell/getpresellbillno",method:"post",data:e})}function i(e){return Object(o.a)({url:"/presell/savePreSell",method:"post",data:e})}function a(e){return Object(o.a)({url:"/presell/getpreselllist",method:"post",data:e})}function l(e){return Object(o.a)({url:"/presell/getpresellformonthlist",method:"post",data:e})}function s(e){return Object(o.a)({url:"/presell/getpresellinfo",method:"post",data:e})}function c(e){return Object(o.a)({url:"/presell/getpresellformonthinfo",method:"post",data:e})}function u(e){return Object(o.a)({url:"/presell/auditpresell",method:"post",data:e})}function d(e){return Object(o.a)({url:"/presell/unauditpresell",method:"post",data:e})}function m(e){return Object(o.a)({url:"/presell/buildu8so",method:"post",data:e})}function f(e){return Object(o.a)({url:"/presell/delPreSell",method:"post",data:e})}function p(e){return Object(o.a)({url:"/presell/GetPreviewData",method:"post",data:e})}},p6YX:function(e,t,r){},sqYw:function(e,t,r){"use strict";r.r(t);var o=r("QbLZ"),n=r.n(o),i=r("P2sY"),a=r.n(i),l=r("m1cH"),s=r.n(l),c=r("hE4x"),u=r("YAJh"),d=r("hmxl"),m=r("mYkC"),f=r("ZySA"),p=r("Mz3J"),v=r("Q4Eu"),h=r("XINx"),F=r("udOU"),b=r("7Qib"),g={name:"presell",components:{Pagination:p.a},directives:{waves:f.a,elDragDialog:h.a,permission:v.a},data:function(){return{tableKey:0,formStatus:"add",canEdit:!0,orderForm:{FID:"",FType:"",FBillNo:"",FDate:void 0,FSTCode:"",FCustCode:"",FCusName:"",FDealerCode:"",FDealerName:"",FTaxRate:13,FBiller:"",FBillerName:"",FVerifier:"",FVerifyDate:"",Fremark:"",FU8BillNo:"",FStatus:"0"},entryForm:{edit:!0,FEntryID:0,FID:0,FNo:"1",FInvCode:"",FInvName:"",FInvStd:"",FInvUnitCode:"",FInvUnitName:"",FQty:0,FPlanPrice:0,FTaxPrice:0,FPrice:0,FAmount:0,FTaxRate:13,FDisAmount:0,FSum:0,FRequestDate:"",FProject:"",FEntryRemark:"",FRowState:"",FPrice2:0,FAmount2:0,FTaxPrice2:0,FSum2:0,FVolume:0,FTotalVolume:0},rules:{FBillNo:[{required:!0,message:"单号不可无空!",trigger:"change"}],FCusName:[{required:!0,message:"开单客户不可无空!",trigger:"change"}],FSTCode:[{required:!0,message:"销售类型不可无空!",trigger:"change"}]},list:[],u8List:[],u8ListCopy:[],u8StList:[],invList:[],invTotal:0,listLoading:!0,invListLoading:!0,dialogInvVisible:!1,listQuery:{page:1,limit:20,searchword:void 0,ccuscode:void 0},multipleSelection:[],currentRole:"customer",currentDate:"",currentRow:0,pickerOptionsStart:{disabledDate:function(e){return e.getTime()<Object(b.c)().getTime()}},pickerOptionsStartForRequest:{},btnIsLoading:!1,haveDel:!1,summaryColumns:[{label:"数量",fieldname:"FQty"},{label:"体积",fieldname:"FVolume"},{label:"总体积",fieldname:"FTotalVolume"},{label:"税额",fieldname:"FTaxAmount"},{label:"价税合计",fieldname:"FSum"},{label:"最终无税金额",fieldname:"FAmount2"},{label:"最终价税合计",fieldname:"FSum2"}],dialogPreviewVisible:!1,orderFormPre:{},listPre:[],summary:{}}},watch:{formStatus:{handler:function(e){this.canEdit="look"===e}},"orderForm.FCustCode":{handler:function(e){this.listQuery.ccuscode=e}},"orderForm.FTaxRate":{handler:function(e){this.list.forEach(function(t){t.FTaxRate=e})}},"orderForm.FDate":{handler:function(e){"add"!=this.formStatus&&"edit"!=this.formStatus||this.list.forEach(function(t){new Date(e).getTime()>=new Date(t.FRequestDate).getTime()&&(t.FRequestDate=null)}),this.pickerOptionsStartForRequest={disabledDate:function(t){return t.getTime()<new Date(e).getTime()}}}}},methods:{transSearch:function(e){this.listQuery.searchword=e},changeCus:function(e){this.orderForm.FCustCode=e},judgeRole:function(){return"trader"==this.currentRole},filterU8:function(e){this.u8List=e?[].concat(s()(this.u8ListCopy)).filter(function(t){return t.ccuscode.indexOf(e)>-1||t.ccusname.indexOf(e)>-1}):[].concat(s()(this.u8ListCopy))},confirmEdit:function(e){e.edit=!1,this.$message({message:"行"+e.FNo+"被确认!",type:"success"})},showInvList:function(e){this.dialogInvVisible=!this.dialogInvVisible,this.currentRow=e.$index,this.getInvList(e.row)},handleFilter:function(){this.listQuery.page=1,this.getInvList()},changeCurrentRow:function(e){this.currentRow=e},onSearch:function(e){var t=this,r=e.row;""===r.FInvCode||void 0===r.FInvCode?(this.dialogInvVisible=!this.dialogInvVisible,this.currentRow=e.$index,this.getInvList(e.row)):Object(d.a)(a()({},this.listQuery,{searchword:r.FInvCode})).then(function(e){t.dialogInvVisible=!0;var r=e.data,o=r.data,n=r.state,i=r.message;if("success"===n)if(o.items.length>0)t.invList=o.items,t.invTotal=o.total;else{var l=[a()({},t.orderForm)];t.confirm(l),t.$notify({title:"提示",message:"没有查询到数据!",type:"warning",duration:2e3})}else t.$notify({title:"错误",message:i,type:"warning",duration:2e3});t.invListLoading=!1})},getInvList:function(e){var t=this;this.invListLoading=!0,Object(d.a)(this.listQuery).then(function(e){var r=e.data,o=r.data,n=r.state;r.message;"success"===n&&(t.invList=o.items,t.invTotal=o.total),setTimeout(function(){t.invListLoading=!1},1500)})},confirm:function(e){var t=this,r=e;r.length>0?(r.forEach(function(e,o){t.list[t.currentRow].FInvCode=r[o].cinvcode,t.list[t.currentRow].FInvName=r[o].cinvname,t.list[t.currentRow].FInvStd=r[o].cinvstd,t.list[t.currentRow].FInvUnitCode=r[o].ccomunitcode,t.list[t.currentRow].FInvUnitName=r[o].ccomunitname,t.list[t.currentRow].FQty=r[o].fminquantity,t.list[t.currentRow].FVolume=r[o].ivolume,t.list[t.currentRow].FTotalVolume=1*r[o].ivolume,t.list[t.currentRow].FPlanPrice=r[o].iuprice,t.list[t.currentRow].FPlanPrice=r[o].iuprice,t.list[t.currentRow].FTaxPrice=r[o].iinvnowcost;var n=t.list[t.currentRow].FPlanPrice,i=t.orderForm.FTaxRate,a=t.list[t.currentRow].FTaxPrice,l=t.list[t.currentRow].FQty,s=F.Calc.divide(a,F.Calc.sum(1,F.Calc.divide(i,100))),c=F.Calc.multiply(s,l),u=F.Calc.multiply(a,l),d=F.Calc.multiply(F.Calc.divide(i,100),u),m=F.Calc.multiply(l,F.Calc.minus(n,a));t.list[t.currentRow].FTaxPrice=a,t.list[t.currentRow].FPrice=s.toFixed(2),t.list[t.currentRow].FAmount=c.toFixed(2),t.list[t.currentRow].FTaxAmount=d.toFixed(2),t.list[t.currentRow].FSum=u.toFixed(2),t.list[t.currentRow].FDisAmount=m.toFixed(2)}),this.dialogInvVisible=!1):this.$notify({title:"错误",message:"没有勾选",type:"warning",duration:2e3})},handleChange:function(e,t){if(this.currentRow=t,""!=this.list[t].FInvCode){var r=this.list[t].FPlanPrice,o=this.orderForm.FTaxRate,n=this.list[t].FTaxPrice,i=e,a=this.list[t].FVolume,l=F.Calc.divide(n,F.Calc.sum(1,F.Calc.divide(o,100))),s=F.Calc.multiply(l,i),c=F.Calc.multiply(n,i),u=F.Calc.multiply(F.Calc.divide(o,100),c),d=F.Calc.multiply(i,F.Calc.minus(r,n));this.list[t].FTaxPrice=n,this.list[t].FPrice=l.toFixed(2),this.list[t].FAmount=s.toFixed(2),this.list[t].FTaxAmount=u.toFixed(2),this.list[t].FSum=c.toFixed(2),this.list[t].FDisAmount=d.toFixed(2),this.list[t].FTotalVolume=F.Calc.multiply(a,i)}},addRow:function(){return this.list.push(a()({},this.entryForm,{FNo:this.list.length+1,FID:"add"==this.formStatus?0:this.orderForm.FID})),this.list.length-1},delRow:function(e){var t=this;this.$confirm("删除行"+(e+1)+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.list.splice(e,1),t.reCalcRowNo()}).catch(function(){})},clearRow:function(){var e=this;this.$confirm("清空表格全部行, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.list=[],e.addRow()}).catch(function(){})},editForm:function(){var e=this;this.$confirm("此操作将编辑此预订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.formStatus="edit"}).catch(function(){})},delForm:function(){var e=this;this.$confirm("此操作将删除此预订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(m.d)({id:e.orderForm.FID}).then(function(t){var r=t.data,o=(r.data,r.message),n=r.state;e.haveDel="success"===n,e.$notify({title:"success"===n?"成功":"错误",message:o,type:"success"===n?"success":"warning",duration:2e3})})}).catch(function(){})},cancelEditForm:function(){this.formStatus="look"},beforSaveForm:function(){var e=[].concat(s()(this.list));return e.length>0&&e.some(function(e){return!e.edit&&""!==e.FInvCode&&""!==e.FRequestDate})},saveForm:function(){var e=this;this.beforSaveForm()?this.$refs.orderForm.validate(function(t){t&&e.$confirm("此操作将提交您的编辑, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.list=e.list.filter(function(e){return""!=e.FInvCode});var t=a()({},{state:e.formStatus},{form:e.orderForm},{list:e.list});Object(m.j)(t).then(function(t){var r=t.data,o=r.data,n=r.message,i=r.state;"success"===i&&(e.formStatus="look",e.$router.push({path:"/presell",query:{id:o}})),e.$notify({title:"success"===i?"成功":"错误",message:n,type:"success"===i?"success":"warning",duration:2e3})}).catch(function(e){console.log(e)})}).catch(function(){})}):this.$notify({title:"错误",message:"表单部分行尚未被确认或者表单信息不完整! \n 注意：存货编码或者到期时间不可为空",type:"warning",duration:2e3})},reCalcRowNo:function(){this.list.forEach(function(e,t){e.FNo=t+1})},getPreSellInfo:function(e){var t=this;Object(m.h)({id:e}).then(function(e){var r=e.data,o=r.data;r.message;"success"===r.state&&(t.orderForm=o.form,t.list=o.list.map(function(e){var t=e;return t.edit=!1,t}),t.formStatus="look",setTimeout(function(){t.listLoading=!1},1500))}).catch(function(){})},UnAuditForm:function(){var e=this;"1"==this.orderForm.FStatus?this.$confirm("您的操作将改变此预订单的审批状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.btnIsLoading=!0,Object(m.k)({verifier:e.$store.getters.username,id:e.orderForm.FID}).then(function(t){var r=t.data,o=r.data,n=r.state,i=r.message;return"success"===n&&(e.orderForm.FVerifyDate=o.date,e.orderForm.FVerifier=o.verifier,e.orderForm.FStatus=o.status+""),e.btnIsLoading=!1,e.$notify({title:"success"==n?"成功":"错误",message:i,type:n,duration:2e3})}).catch(function(){console.log("error")})}).catch(function(){}):this.$notify({title:"错误",message:"已完成弃审!",type:"error",duration:2e3})},AuditForm:function(){var e=this;"0"==this.orderForm.FStatus?this.$confirm("您的操作将改变此预订单的审批状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.btnIsLoading=!0,Object(m.b)({verifier:e.$store.getters.username,id:e.orderForm.FID}).then(function(t){var r=t.data,o=r.data,n=r.state,i=r.message;return"success"===n&&(e.orderForm.FVerifyDate=o.date,e.orderForm.FVerifier=o.verifier,e.orderForm.FStatus=o.status+""),e.btnIsLoading=!1,e.$notify({title:"success"==n?"成功":"错误",message:i,type:n,duration:2e3})}).catch(function(){console.log("error")})}).catch(function(){}):this.$notify({title:"错误",message:"已完成审批!",type:"error",duration:2e3})},PreviewBill:function(){var e=this;Object(m.a)({id:this.orderForm.FID}).then(function(t){var r=t.data,o=r.data,i=r.state,a=r.message;if("success"===i){var l=o.form,c=o.list;delete l.FID,e.orderFormPre=l;var u=0,d=0,m=0,f=0,p=0;c.forEach(function(e){delete e.FID,delete e.FRowState,u=F.Calc.sum(u,e.FQty),d=F.Calc.sum(d,e.FVolume),m=F.Calc.sum(m,e.FTotalVolume),f=F.Calc.sum(f,e.FTaxAmount),p=F.Calc.sum(p,e.FSum)});var v=n()({},[].concat(s()(c)).pop());for(var h in v)v[h]="";v.FInvCode="合计",v.FQty=u,v.FVolume=d,v.FTotalVolume=m,v.FTaxAmount=f,v.FSum=p,e.listPre=[].concat(s()(c),[v])}return e.btnIsLoading=!1,e.$notify({title:"success"==i?"成功":"错误",message:a,type:i,duration:2e3})}).catch(function(){}),this.dialogPreviewVisible=!this.dialogPreviewVisible},BuildSo:function(){var e=this;"1"==this.orderForm.FStatus?this.$confirm("您的操作将生成U8销售单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.btnIsLoading=!0,Object(m.c)({id:e.orderForm.FID}).then(function(t){var r=t.data,o=(r.data,r.state),n=r.message;return"success"===o&&e.getPreSellInfo(e.$route.query.id),e.btnIsLoading=!1,e.$notify({title:"success"==o?"成功":"错误",message:n,type:o,duration:2e3})}).catch(function(){})}).catch(function(){}):this.$notify({title:"错误",message:"已完成审批!",type:" ",duration:2e3})},haveAudit:function(){return this.orderForm.FStatus>0},headerclick:function(e,t){var r=e.label;if("到货日期(点击复制)"==r&&("add"==this.formStatus||"edit"==this.formStatus)){var o=[].concat(s()(this.list)).filter(function(e){return""!=e.FRequestDate}).shift();o&&this.list.forEach(function(e){return e.FRequestDate=o.FRequestDate})}if("特价项目(点击复制)"==r&&("add"==this.formStatus||"edit"==this.formStatus)){var n=[].concat(s()(this.list)).filter(function(e){return""!=e.FProject}).shift();n&&this.list.forEach(function(e){return e.FProject=n.FProject})}},getSummary:function(e){var t=this,r=e.columns,o=e.data,n=[];return r.forEach(function(e,r){if(0!==r){if(t.summaryColumns.findIndex(function(t){return t.label==e.label})>-1){var i=t.summaryColumns.find(function(t){return t.label==e.label}),a=o.map(function(e){return Number(e[i.fieldname])});a.every(function(e){return isNaN(e)})?n[r]="":(n[r]=a.reduce(function(e,t){var r=Number(t);return isNaN(r)?e:F.Calc.sum(e,t)},0),n[r])}}else n[r]="合计"}),n}},mounted:function(){var e=this;this.currentRole=[].concat(s()(this.$store.getters.roles)).shift(),this.$route.query.id?this.getPreSellInfo(this.$route.query.id):("trader"==this.currentRole&&(this.orderForm.FDealerCode=this.$store.getters.username,this.orderForm.FDealerName=this.$store.getters.name,this.orderForm.FType=1),"customer"==this.currentRole&&(this.orderForm.FCustCode=this.$store.getters.cuscode,this.orderForm.FType=2),"admin"==this.currentRole&&(this.orderForm.FType=2),this.orderForm.FBiller=this.$store.getters.username,this.orderForm.FBillerName=this.$store.getters.name,Object(m.e)({type:"presell"}).then(function(t){var r=t.data,o=r.data,n=r.state;r.message;if("success"===n){var i=o.billNo,a=o.date;setTimeout(function(){e.listLoading=!1},1500),e.canEdit=!1,e.orderForm.FBillNo=i,e.orderForm.FDate=a,e.pickerOptionsStartForRequest={disabledDate:function(e){return e.getTime()<=new Date(a).getTime()}}}}).catch(function(e){})),"trader"==this.currentRole&&Object(c.c)({trader:this.$store.getters.username}).then(function(t){var r=t.data,o=r.data;r.message;"success"===r.state&&(e.u8List=o.items,e.u8ListCopy=o.items)}).catch(function(){}),"customer"==this.currentRole&&Object(c.d)({cuscode:this.$store.getters.username}).then(function(t){var r=t.data,o=r.data;r.message;"success"===r.state&&(e.u8List=o.items,e.u8ListCopy=o.items)}).catch(function(){}),"admin"==this.currentRole&&Object(c.a)().then(function(t){var r=t.data,o=r.data;r.message;"success"===r.state&&(e.u8List=o.items,e.u8ListCopy=o.items)}).catch(function(){}),Object(u.a)().then(function(t){var r=t.data,o=r.data;r.message;"success"===r.state&&(e.u8StList=o.items)}),this.entryForm.FTaxRate=this.orderForm.FTaxRate;for(var t=1;t<6;t++)this.list.push(a()({},this.entryForm,{FNo:t}))},computed:{showsummary:function(){return!0},clearable:function(){return this.currentRole=[].concat(s()(this.$store.getters.roles)).shift(),"customer"==this.currentRole&&"add"==this.formStatus||"edit"==this.formStatus},maxheight:function(){return.4*window.innerHeight}}},y=(r("NyQU"),r("gs35"),r("KHd+")),w=Object(y.a)(g,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"orderForm",staticClass:"demo-orderForm",attrs:{inline:"",model:e.orderForm,rules:e.rules,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"单号",prop:"FBillNo",required:""}},[r("el-input",{staticClass:"fixitem",attrs:{disabled:""},model:{value:e.orderForm.FBillNo,callback:function(t){e.$set(e.orderForm,"FBillNo",t)},expression:"orderForm.FBillNo"}}),e._v(" "),e.haveDel?r("span",{staticStyle:{color:"red","font-size":"18px"}},[e._v("此订单已删除!")]):e._e()],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"日期",prop:"FDate",required:""}},[r("el-date-picker",{staticClass:"fixitem",attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期",disabled:e.canEdit},model:{value:e.orderForm.FDate,callback:function(t){e.$set(e.orderForm,"FDate",t)},expression:"orderForm.FDate"}})],1)],1),e._v(" "),e.judgeRole()?r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"经销商",prop:"FDealerName"}},[r("el-input",{staticClass:"fixitem",attrs:{disabled:""},model:{value:e.orderForm.FDealerName,callback:function(t){e.$set(e.orderForm,"FDealerName",t)},expression:"orderForm.FDealerName"}})],1)],1):e._e(),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"开单客户",prop:"FCusName",required:""}},[r("el-select",{staticClass:"fixitem",attrs:{placeholder:"请选择开单客户",clearable:e.clearable,filterable:"","filter-method":e.filterU8,disabled:e.canEdit},on:{change:e.changeCus},model:{value:e.orderForm.FCusName,callback:function(t){e.$set(e.orderForm,"FCusName",t)},expression:"orderForm.FCusName"}},e._l(e.u8List,function(e){return r("el-option",{key:e.ccuscode,attrs:{label:e.ccusname,value:e.ccuscode}})}))],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"销售类型",prop:"FSTCode",required:""}},[r("el-select",{staticClass:"fixitem",attrs:{placeholder:"请选择销售类型",disabled:e.canEdit},model:{value:e.orderForm.FSTCode,callback:function(t){e.$set(e.orderForm,"FSTCode",t)},expression:"orderForm.FSTCode"}},e._l(e.u8StList,function(e){return r("el-option",{key:e.cstcode,attrs:{label:e.cstname,value:e.cstcode}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"税率",required:"",prpp:"FTaxRate"}},[r("el-input-number",{staticClass:"fixitem",attrs:{step:1,min:0,max:100,disabled:e.canEdit},model:{value:e.orderForm.FTaxRate,callback:function(t){e.$set(e.orderForm,"FTaxRate",t)},expression:"orderForm.FTaxRate"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"制单人",prop:"FBillerName"}},[r("el-input",{staticClass:"fixitem",attrs:{disabled:""},model:{value:e.orderForm.FBillerName,callback:function(t){e.$set(e.orderForm,"FBillerName",t)},expression:"orderForm.FBillerName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"状态",prop:"FStatus"}},[r("el-select",{staticClass:"fixitem",attrs:{disabled:""},model:{value:e.orderForm.FStatus,callback:function(t){e.$set(e.orderForm,"FStatus",t)},expression:"orderForm.FStatus"}},[r("el-option",{attrs:{label:"未审批",value:"0"}}),e._v(" "),r("el-option",{attrs:{label:"审批",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"生单",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"关闭",value:"3"}})],1)],1)],1)],1),e._v(" "),"0"!==e.orderForm.FStatus?r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"审核人",prop:"FVerifier"}},[r("el-input",{staticClass:"fixitem",attrs:{disabled:""},model:{value:e.orderForm.FVerifier,callback:function(t){e.$set(e.orderForm,"FVerifier",t)},expression:"orderForm.FVerifier"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"审核日期",prop:"FVerifyDate"}},[r("el-date-picker",{staticClass:"fixitem",attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.orderForm.FVerifyDate,callback:function(t){e.$set(e.orderForm,"FVerifyDate",t)},expression:"orderForm.FVerifyDate"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"U8单号",prop:"FU8BillNo"}},[r("el-input",{staticClass:"fixitem",attrs:{disabled:""},model:{value:e.orderForm.FU8BillNo,callback:function(t){e.$set(e.orderForm,"FU8BillNo",t)},expression:"orderForm.FU8BillNo"}})],1)],1)],1):e._e(),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-input",{staticStyle:{width:"81vw"},attrs:{placeholder:"请输入预订单的备注",type:"textarea",disabled:e.canEdit},model:{value:e.orderForm.Fremark,callback:function(t){e.$set(e.orderForm,"Fremark",t)},expression:"orderForm.Fremark"}})],1)],1)],1),e._v(" "),r("el-button-group",{directives:[{name:"permission",rawName:"v-permission",value:["customer","trader","admin"],expression:"['customer','trader','admin']"}],staticStyle:{"margin-top":"20px"}},["look"!==this.formStatus?r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addRow}},[e._v("增行")]):e._e(),e._v(" "),"look"!==this.formStatus?r("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.clearRow}},[e._v("清空行")]):e._e(),e._v(" "),"look"!==this.formStatus||e.haveDel?e._e():r("el-button",{attrs:{icon:"el-icon-edit",disabled:e.haveAudit()},on:{click:e.editForm}},[e._v("编辑订单")]),e._v(" "),"look"!==this.formStatus||e.haveAudit()||e.haveDel?e._e():r("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:e.delForm}},[e._v("删除订单")]),e._v(" "),"look"!==this.formStatus?r("el-button",{attrs:{type:"warning",icon:"el-icon-check"},on:{click:e.saveForm}},[e._v("保存订单")]):e._e()],1),e._v(" "),r("el-button-group",{directives:[{name:"permission",rawName:"v-permission",value:["seller","admin"],expression:"['seller','admin']"}],staticStyle:{"margin-top":"20px"}},["0"===e.orderForm.FStatus&&"look"==this.formStatus?r("el-button",{attrs:{type:"danger",icon:"el-icon-circle-check-outline",loading:e.btnIsLoading},on:{click:e.AuditForm}},[e._v("审批")]):e._e(),e._v(" "),"1"===e.orderForm.FStatus?r("el-button",{attrs:{type:"info",icon:"el-icon-circle-close-outline",loading:e.btnIsLoading},on:{click:e.UnAuditForm}},[e._v("弃审")]):e._e(),e._v(" "),"1"===e.orderForm.FStatus?r("el-button",{attrs:{type:"danger",icon:"el-icon-circle-check-outline",loading:e.btnIsLoading},on:{click:e.BuildSo}},[e._v("生单")]):e._e()],1),e._v(" "),r("el-button-group",{directives:[{name:"permission",rawName:"v-permission",value:["customer","trader","admin"],expression:"['customer','trader','admin']"}],staticStyle:{"margin-top":"20px"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",loading:e.btnIsLoading},on:{click:e.PreviewBill}},[e._v("预览")])],1),e._v(" "),r("el-button-group",{staticStyle:{"margin-top":"20px"}},[r("el-popover",{attrs:{placement:"top-start",title:"友情提醒",width:"400",trigger:"hover",content:"根据结算关系是两方还是三方，下单时需分两种情况：\n        一、如是两方关系，即付款、开票客户均为经销商，则经销商、开票客户两个信息栏统一填写经销商名称。\n        二、如是三方关系，有经销商作为服务商，则经销商选项那栏填写服务商单位名称，开票客户那栏填写建设单位名称，即最终开票单位。"}},[r("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("友情提醒")])],1)],1),e._v(" "),r("div",{staticClass:"claim_company"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{"margin-top":"10px"},attrs:{data:e.list,border:"","highlight-current-row":"","max-height":e.maxheight,"show-summary":e.showsummary,"summary-method":e.getSummary},on:{"header-click":e.headerclick}},[r("el-table-column",{attrs:{align:"center",label:"行号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FNo))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticStyle:{width:"40px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:e.canEdit},on:{click:function(r){e.delRow(t.$index)}}}),e._v(" "),t.row.edit?r("el-button",{staticStyle:{width:"40px"},attrs:{type:"success",size:"mini",icon:"el-icon-circle-check-outline",disabled:e.canEdit},on:{click:function(r){e.confirmEdit(t.row)}}}):r("el-button",{staticStyle:{width:"40px"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit",disabled:e.canEdit},on:{click:function(e){t.row.edit=!t.row.edit}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"存货编码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[r("el-input",{staticClass:"input-with-select",attrs:{size:"mini",placeholder:"输入存货编码/名称 回车检索"},on:{focus:function(r){e.changeCurrentRow(t.$index)},change:e.transSearch},nativeOn:{keyup:function(r){if(!("button"in r)&&e._k(r.keyCode,"enter",13,r.key,"Enter"))return null;e.onSearch(t)}},model:{value:t.row.FInvCode,callback:function(r){e.$set(t.row,"FInvCode",r)},expression:"scope.row.FInvCode"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(r){e.showInvList(t)}},slot:"append"})],1)]:r("span",[e._v(e._s(t.row.FInvCode))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"存货名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FInvName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"存货规格",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FInvStd))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"单位",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FInvUnitName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"数量",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[r("el-input-number",{attrs:{size:"mini",min:.1,max:1e4,step:.1},on:{change:function(r){e.handleChange(r,t.$index)}},model:{value:t.row.FQty,callback:function(r){e.$set(t.row,"FQty",r)},expression:"scope.row.FQty"}})]:r("span",[e._v(e._s(t.row.FQty))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"体积",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FVolume))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"总体积",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FTotalVolume))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"面价",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FPlanPrice))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"含税单价",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FTaxPrice))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"税率",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FTaxRate))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"税额",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FTaxAmount))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"折扣额",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FDisAmount))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"价税合计",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FSum))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"到货日期(点击复制)",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[r("el-date-picker",{staticStyle:{width:"80%"},attrs:{size:"mini",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期","picker-options":e.pickerOptionsStartForRequest},model:{value:t.row.FRequestDate,callback:function(r){e.$set(t.row,"FRequestDate",r)},expression:"scope.row.FRequestDate"}})]:r("span",[e._v(e._s(t.row.FRequestDate.split(" ")[0].replace(/\//g,"-")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"特价项目(点击复制)",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[r("el-input",{attrs:{type:"text",size:"mini",placeholder:"请输入"},model:{value:t.row.FProject,callback:function(r){e.$set(t.row,"FProject",r)},expression:"scope.row.FProject"}})]:r("span",[e._v(e._s(t.row.FProject))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"分录备注",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[r("el-input",{attrs:{type:"text",size:"mini",placeholder:"请输入"},model:{value:t.row.FEntryRemark,callback:function(r){e.$set(t.row,"FEntryRemark",r)},expression:"scope.row.FEntryRemark"}})]:r("span",[e._v(e._s(t.row.FEntryRemark))])]}}])}),e._v(" "),"look"===e.formStatus?r("el-table-column",{attrs:{align:"center",label:"最终无税单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FPrice2))])]}}])}):e._e(),e._v(" "),"look"===e.formStatus?r("el-table-column",{attrs:{align:"center",label:"最终无税金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FAmount2))])]}}])}):e._e(),e._v(" "),"look"===e.formStatus?r("el-table-column",{attrs:{align:"center",label:"最终含税单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FTaxPrice2))])]}}])}):e._e(),e._v(" "),"look"===e.formStatus?r("el-table-column",{attrs:{align:"center",label:"最终价税合计",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.FSum2))])]}}])}):e._e()],1)],1),e._v(" "),r("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.dialogInvVisible,title:"存货列表",width:"60%"},on:{"update:visible":function(t){e.dialogInvVisible=t}}},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"存货编码/存货名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.listQuery.searchword,callback:function(t){e.$set(e.listQuery,"searchword",t)},expression:"listQuery.searchword"}}),e._v(" "),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.invListLoading,expression:"invListLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",data:e.invList,border:"",fit:"","highlight-current-row":"","show-overflow-tooltip":"","max-height":"150"}},[r("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-circle-check-outline"},on:{click:function(r){e.confirm([t.row])}}},[e._v("选取")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"存货编码",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.cinvcode))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"存货名称",width:"250px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.cinvname))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"规格型号",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.cinvstd))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"计量单位",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.ccomunitname))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"体积",width:"70px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.ivolume))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"最小订单量",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.fminquantity))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"面价",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.iuprice))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"含税单价",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.iinvnowcost))])]}}])})],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.invTotal>0,expression:"invTotal>0"}],attrs:{total:e.invTotal,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){e.$set(e.listQuery,"page",t)},"update:limit":function(t){e.$set(e.listQuery,"limit",t)},pagination:e.getInvList}}),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogInvVisible=!1}}},[e._v("取消")])],1)],1),e._v(" "),r("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.dialogPreviewVisible,title:"订单预览",width:"95%"},on:{"update:visible":function(t){e.dialogPreviewVisible=t}}},[r("div",{staticClass:"filter-container",staticStyle:{display:"flex","font-size":"16px"}},[r("legend",[r("fieldset",[r("legend",[e._v("单据信息")]),e._v(" "),r("table",e._l(e.orderFormPre,function(t,o,n){return r("tr",{key:n},[r("td",[e._v(e._s(o)+":"+e._s(t))])])}))])]),e._v(" "),r("div",{staticStyle:{display:"flex","flex-direction":"column"}},[r("legend",[r("fieldset",[r("legend",[e._v("列表信息")]),e._v(" "),r("table",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[r("thead",[r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("行号")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("存货编码")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("存货名称")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("存货规格")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("单位")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("数量")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("体积")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("总体积")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("面价")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("含税单价")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("税率")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("税额")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("折扣额")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("价税合计")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("到货日期")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("特价项目")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("分录备注")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("最终无税单价")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("最终无税金额")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("最终含税单价")]),e._v(" "),r("th",{staticStyle:{"border-collapse":"collapse",border:"1px solid black","text-align":"center"}},[e._v("最终含税合计")])]),e._v(" "),r("tbody",e._l(e.listPre,function(t,o){return r("tr",{key:o,staticStyle:{border:"1px solid black"}},e._l(t,function(t,o){return r("td",{key:o,staticStyle:{border:"1px solid black"}},[e._v(e._s(t))])}))}))])])])])]),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogPreviewVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,"52ed42f2",null);w.options.__file="presell.vue";t.default=w.exports},udOU:function(e,t,r){var o;void 0===(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.sum=function(e,t){if(e%1==0&&t%1==0)return e+t;for(var r=String(e).replace(/\d+\.?/,"").length,o=String(t).replace(/\d+\.?/,"").length,n=r>o?r:o,i="1";n--;)i+="0";return i=Number(i),((e=Math.round(e*i))+(t=Math.round(t*i)))/i},e.minus=function(e,t){if(e%1==0&&t%1==0)return e-t;for(var r=String(e).replace(/\d+\.?/,"").length,o=String(t).replace(/\d+\.?/,"").length,n=r>o?r:o,i="1";n--;)i+="0";return i=Number(i),((e=Math.round(e*i))-(t=Math.round(t*i)))/i},e.divide=function(e,t){for(var r=String(e/t).replace(/\d+\.?/,"").length,o="1";r--;)o+="0";return o=Number(o),(e=Math.round(e*o))/t/o},e.multiply=function(e,t){if(e%1==0&&t%1==0)return e*t;var r,o,n=1,i=1;if(e%1!=0){for(r=String(e).replace(/\d+\.?/,"").length;r--;)n+="0";n=Number(n)}if(t%1!=0){for(o=String(t).replace(/\d+\.?/,"").length;o--;)i+="0";i=Number(i)}return(e=Math.round(e*n))*(t=Math.round(t*i))/(n*i)},e}();t.Calc=r}.apply(t,[r,t]))||(e.exports=o)}}]);