(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cb78"],{Y5bG:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),Math.easeInOutQuad=function(e,t,a,o){return(e/=o/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t};var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function i(e,t,a){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,n=e-i,l=0;t=void 0===t?500:t;!function e(){l+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(l,i,n,t)),l<t?o(e):a&&"function"==typeof a&&a()}()}},pFIU:function(e,t,a){"use strict";a.r(t);var o=a("FyfS"),i=a.n(o),n=a("P2sY"),l=a.n(n),r=a("zF5t"),s=a("Mz3J"),c=a("rfXi"),d=a.n(c),u=a("Kw5r");function p(e,t,a,o,i){var n=[],l=[];return d()(e).forEach(function(e){void 0===e._expanded&&u.default.set(e,"_expanded",t);var r=1;if(void 0!==o&&null!==o&&(r=o+1),u.default.set(e,"_level",r),a?(u.default.set(e,"parent",a),n[r]||(n[r]=0),u.default.set(e,"_marginLeft",n[r]+a._marginLeft),u.default.set(e,"_width",e[i]/a[i]*a._width),n[r]+=e._width):(n[e.id]=[],n[e.id][r]=0,u.default.set(e,"_marginLeft",0),u.default.set(e,"_width",1)),l.push(e),e.children&&e.children.length>0){var s=p(e.children,t,e,r,i);l=l.concat(s)}}),l}var f=a("THBk"),m=a.n(f),h=(a("Hycs"),{name:"ComplexTable",components:{Pagination:s.a,treeTransfer:m.a},data:function(){return{mode:"transfer",tableKey:0,func:p,list:null,total:0,listLoading:!0,listQuery:{page:1,limit:20},temp:{roleId:"",rolecode:"",rolename:"",isclosed:!1,roledescription:""},dialogStatus:"",textMap:{update:"编辑",create:"新增"},dialogFormVisible:!1,rules:{rolecode:[{required:!0,message:"角色编码不可为空",trigger:"blur"}],rolename:[{required:!0,message:"角色名称不可为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;return this.listLoading=!0,Object(r.c)().then(function(t){var a=t.data,o=a.data,i=a.state;a.message;"success"===i&&(e.list=o.items,e.total=o.total),setTimeout(function(){e.listLoading=!1},0)})},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.temp={},this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},createData:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var a=l()({},e.temp);Object(r.a)(a).then(function(t){var a=t.data,o=a.state,i=a.message,n=a.data;"success"===o&&e.list.unshift(n),e.dialogFormVisible=!1,e.$notify({title:"success"===o?"成功":"失败",message:i,type:o,duration:2e3})})}})},handleUpdate:function(e){var t=this;this.dialogFormVisible=!0,this.temp=l()({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},updateData:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var a=l()({},e.temp);Object(r.e)(a).then(function(t){var a=t.data,o=a.state,n=a.message;if("success"===o){var l=!0,r=!1,s=void 0;try{for(var c,d=i()(e.list);!(l=(c=d.next()).done);l=!0){var u=c.value;if(u.roleId===e.temp.roleId){var p=e.list.indexOf(u);e.list.splice(p,1,e.temp);break}}}catch(e){r=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(r)throw s}}}e.dialogFormVisible=!1,e.$notify({title:"success"===o?"成功":"失败",message:n,type:o,duration:2e3})})}})},handleDelete:function(e){var t=this,a=e.isclosed?"启用":"停用";this.$confirm("此操作将"+a+"此角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o=e.roleId;Object(r.b)({roleId:o}).then(function(o){var i=o.data,n=i.state;i.message;t.$notify({title:"success"===n?"成功":"失败",message:a+"成功",type:n,duration:2e3}),e.isclosed="success"===n&&!e.isclosed})}).catch(function(){})}}}),v=a("KHd+"),b=Object(v.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"角色编码",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.rolecode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色名称",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.rolename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否停用",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.isclosed,callback:function(a){e.$set(t.row,"isclosed",a)},expression:"scope.row.isclosed"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"210px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.roledescription))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"350px","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:t.row.isclosed?"success":"danger",size:"mini"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v(e._s(t.row.isclosed?"启用":"停用"))])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){e.$set(e.listQuery,"page",t)},"update:limit":function(t){e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogFormVisible,title:e.textMap[e.dialogStatus]},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色编码",prop:"rolecode"}},[a("el-input",{attrs:{readonly:"update"==e.dialogStatus,disabled:"update"==e.dialogStatus},model:{value:e.temp.rolecode,callback:function(t){e.$set(e.temp,"rolecode",t)},expression:"temp.rolecode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称",prop:"rolename"}},[a("el-input",{model:{value:e.temp.rolename,callback:function(t){e.$set(e.temp,"rolename",t)},expression:"temp.rolename"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否停用",prop:"isclosed"}},[a("el-checkbox",{model:{value:e.temp.isclosed,callback:function(t){e.$set(e.temp,"isclosed",t)},expression:"temp.isclosed"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述",prop:"roledescription"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"请简述此角色的作用"},model:{value:e.temp.roledescription,callback:function(t){e.$set(e.temp,"roledescription",t)},expression:"temp.roledescription"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("确认")])],1)],1)],1)},[],!1,null,null,null);b.options.__file="rolelist.vue";t.default=b.exports},zF5t:function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"d",function(){return n}),a.d(t,"a",function(){return l}),a.d(t,"e",function(){return r}),a.d(t,"b",function(){return s});var o=a("t3Un");function i(){return Object(o.a)({url:"/role/getallrolelist",method:"post"})}function n(e){return Object(o.a)({url:"/role/getroleforselect",method:"post",data:e})}function l(e){return Object(o.a)({url:"/role/createrole",method:"post",data:e})}function r(e){return Object(o.a)({url:"/role/updaterole",method:"post",data:e})}function s(e){return Object(o.a)({url:"/role/delrole",method:"post",data:e})}}}]);