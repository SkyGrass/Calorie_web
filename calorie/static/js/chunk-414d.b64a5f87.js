(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-414d"],{"4++B":function(e,t,a){},"7cz0":function(e,t,a){"use strict";var l=a("4++B");a.n(l).a},ZySA:function(e,t,a){"use strict";var l=a("P2sY"),n=a.n(l),r=(a("jUE0"),{bind:function(e,t){e.addEventListener("click",function(a){var l=n()({},t.value),r=n()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},l),o=r.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var i=o.getBoundingClientRect(),s=o.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":((s=document.createElement("span")).className="waves-ripple",s.style.height=s.style.width=Math.max(i.width,i.height)+"px",o.appendChild(s)),r.type){case"center":s.style.top=i.height/2-s.offsetHeight/2+"px",s.style.left=i.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-i.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-i.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=r.color,s.className="waves-ripple z-active",!1}},!1)}}),o=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(o)),r.install=o;t.a=r},jUE0:function(e,t,a){},myrW:function(e,t,a){"use strict";a.r(t);var l=a("YEIV"),n=a.n(l),r=a("FyfS"),o=a.n(r),i=a("QbLZ"),s=a.n(i),c=a("P2sY"),u=a.n(c),d=a("itRl"),p=a("rfXi"),m=a.n(p),f=a("Kw5r");function h(e,t,a,l,n){var r=[],o=[];return m()(e).forEach(function(e){void 0===e._expanded&&f.default.set(e,"_expanded",t);var i=1;if(void 0!==l&&null!==l&&(i=l+1),f.default.set(e,"_level",i),a?(f.default.set(e,"parent",a),r[i]||(r[i]=0),f.default.set(e,"_marginLeft",r[i]+a._marginLeft),f.default.set(e,"_width",e[n]/a[n]*a._width),r[i]+=e._width):(r[e.id]=[],r[e.id][i]=0,f.default.set(e,"_marginLeft",0),f.default.set(e,"_width",1)),o.push(e),e.children&&e.children.length>0){var s=h(e.children,t,e,i,n);o=o.concat(s)}}),o}var b=a("0MY0"),v=a.n(b),w=a("ZySA"),_=a("Hycs"),g=a("zF5t"),y={name:"CustomTreeTableDemo",components:{treeTable:d.a,ELTreeSelect:v.a},directives:{waves:w.a},data:function(){return{func:h,expandAll:!1,rowclass:"rowclass",columns:[{text:"",value:"meta.title",width:50,align:"center"},{text:"排序",value:"sort",width:50,align:"center"}],temp:{},meta:{},dialogStatus:"",textMap:{update:"编辑",create:"新增"},dialogFormVisible:!1,rules:{rolecode:[{required:!0,message:"角色编码不可为空",trigger:"blur"}],rolename:[{required:!0,message:"角色名称不可为空",trigger:"blur"}]},data:[],listQuery:{searchword:void 0},roles:[],styles:{width:"300px"},test:"",selectParams:{clearable:!0,placeholder:"根节点"},treeParams:{"default-expand-all":!0,filterable:!1,"check-strictly":!0,"render-content":this._renderFun,data:[],props:{children:"children",label:"title",value:"menuId"}}}},created:function(){this.getMenus(),this.getAllRole()},methods:n()({getMenus:function(){var e=this;return Object(_.a)().then(function(t){e.data=t.data})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},handleUpdate:function(e){var t=this;this.dialogFormVisible=!0,this.temp=u()({},e),this.meta=u()({},e.meta),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate(),t.$refs.treeSelect.treeDataUpdateFun(t.filterCanUseRouter(t.temp)),console.log(t.treeParams.data)})},getAllRole:function(){var e=this;return Object(g.c)().then(function(t){e.roles=t.data.items})},updateData:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var a=u()({},e.temp,e.meta);a.meta=s()({},e.meta),console.log(a)}})},filterCanUseRouter:function(e){return this.data.filter(function(t){return t.menuId!=e.menuId&&t.parentId!=e.menuId})},_nodeClickFun:function(e,t,a){console.log(this.temp.parentId,e)},_renderFun:function(e,t){var a=t.node;t.data,t.store;return e("span",{class:"custom-tree-node"},[e("span",[a.label])])}},"updateData",function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var a=u()({},e.temp),l=!0,n=!1,r=void 0;try{for(var i,s=o()(e.data);!(l=(i=s.next()).done);l=!0){var c=i.value;if(c.menuId===a.menuId){var d=e.data.indexOf(c);e.data.splice(d,1,a);break}}}catch(e){n=!0,r=e}finally{try{!l&&s.return&&s.return()}finally{if(n)throw r}}console.log(e.data),e.dialogFormVisible=!1,e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})}})})},k=(a("7cz0"),a("KHd+")),x=Object(k.a)(y,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.listQuery.searchword,callback:function(t){e.$set(e.listQuery,"searchword",t)},expression:"listQuery.searchword"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("新增")])],1),e._v(" "),a("tree-table",{attrs:{data:e.data,columns:e.columns,"eval-func":e.func,"expand-all":e.expandAll,border:""}},[a("el-table-column",{attrs:{label:"模块",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"路径",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.path))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"组件",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.component))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"重定向地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.redirect))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"侧边栏显示",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.hidden,callback:function(a){e.$set(t.row,"hidden",a)},expression:"scope.row.hidden"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"子菜单保持",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.alwaysShow,callback:function(a){e.$set(t.row,"alwaysShow",a)},expression:"scope.row.alwaysShow"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"停用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.isclosed,callback:function(a){e.$set(t.row,"isclosed",a)},expression:"scope.row.isclosed"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogFormVisible,title:e.textMap[e.dialogStatus]},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"模块",prop:"name"}},[a("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路径",prop:"path"}},[a("el-input",{model:{value:e.temp.path,callback:function(t){e.$set(e.temp,"path",t)},expression:"temp.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"组件",prop:"component"}},[a("el-input",{model:{value:e.temp.component,callback:function(t){e.$set(e.temp,"component",t)},expression:"temp.component"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重定向地址",prop:"redirect"}},[a("el-input",{model:{value:e.temp.redirect,callback:function(t){e.$set(e.temp,"redirect",t)},expression:"temp.redirect"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"侧边栏显示",prop:"hidden"}},[a("el-checkbox",{model:{value:e.temp.hidden,callback:function(t){e.$set(e.temp,"hidden",t)},expression:"temp.hidden"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"子菜单保持",prop:"alwaysShow"}},[a("el-checkbox",{model:{value:e.temp.alwaysShow,callback:function(t){e.$set(e.temp,"alwaysShow",t)},expression:"temp.alwaysShow"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否停用",prop:"isclosed"}},[a("el-checkbox",{model:{value:e.temp.isclosed,callback:function(t){e.$set(e.temp,"isclosed",t)},expression:"temp.isclosed"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"title"}},[a("el-input",{model:{value:e.meta.title,callback:function(t){e.$set(e.meta,"title",t)},expression:"meta.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("el-input",{model:{value:e.meta.icon,callback:function(t){e.$set(e.meta,"icon",t)},expression:"meta.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"禁止缓存",prop:"noCache"}},[a("el-checkbox",{model:{value:e.meta.noCache,callback:function(t){e.$set(e.meta,"noCache",t)},expression:"meta.noCache"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"面包屑显示",prop:"breadcrumb"}},[a("el-checkbox",{model:{value:e.meta.breadcrumb,callback:function(t){e.$set(e.meta,"breadcrumb",t)},expression:"meta.breadcrumb"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"允许角色",prop:"roles"}},[a("el-checkbox-group",{model:{value:e.meta.roles,callback:function(t){e.$set(e.meta,"roles",t)},expression:"meta.roles"}},e._l(e.roles,function(e){return a("el-checkbox",{key:e.roleId,attrs:{label:e.rolecode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"指定父级",prop:"parentId"}},[a("ELTreeSelect",{ref:"treeSelect",attrs:{styles:e.styles,"select-params":e.selectParams,"tree-params":e.treeParams},on:{"node-click":e._nodeClickFun},model:{value:e.temp.parentId,callback:function(t){e.$set(e.temp,"parentId",t)},expression:"temp.parentId"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("确认")])],1)],1)],1)},[],!1,null,null,null);x.options.__file="menulist.vue";t.default=x.exports},zF5t:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return o}),a.d(t,"e",function(){return i}),a.d(t,"b",function(){return s});var l=a("t3Un");function n(){return Object(l.a)({url:"/role/getallrolelist",method:"post"})}function r(e){return Object(l.a)({url:"/role/getroleforselect",method:"post",data:e})}function o(e){return Object(l.a)({url:"/role/createrole",method:"post",data:e})}function i(e){return Object(l.a)({url:"/role/updaterole",method:"post",data:e})}function s(e){return Object(l.a)({url:"/role/delrole",method:"post",data:e})}}}]);